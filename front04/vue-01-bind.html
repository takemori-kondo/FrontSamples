<!DOCTYPE html>
<html lang="ja">

<head>
  <link rel="canonical" href="https://site.domain/">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="keywords" content="keyword1,keyword2">
  <meta name="description" content="Search engine shows this text.">
  <meta name="author" content="Name; e-mail: name@mail.domain">
  <meta name="copyright" content="Copyright (c) Name All Rights Reserved.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0 viewport-fit=cover">
  <script src="./node_modules/vue/dist/vue.global.js"></script>
  <title>vue-01-bind</title>
</head>

<body>
  <h1>vue-01-bind</h1>
  <h2>vue.js 2.x で間違えやすいこと</h2>
  <ol>
    <li>vue.jsで間違えやすい事１：bodyに直接バインドはできません。bodyの直下全体をdivで囲んでdivにバインドすればOKです。</li>
    <li>vue.jsで間違えやすい事２：computedやmethodsやwatchで、() => {...} による関数記述は許可されていません。</li>
    <li>vue.jsで間違えやすい事３：elプロパティに指定するのはセレクタです。idに対してであれば、#が必要です。</li>
  </ol>
  <h2>vue.js 3.x (Option API style = vue.js 2.x style)での変更点まとめ</h2>
  <ol>
    <li>new Vue()は、Vue.createApp()になりました。</li>
    <li>elプロパティは廃止され、Vueインスタンス.mount()でバインドするようになりました。</li>
    <li>dataプロパティはメソッド形式が必須になりました。</li>
    <li>詳細は、<a
        href="https://v3-migration.vuejs.org/breaking-changes/">https://v3-migration.vuejs.org/breaking-changes/</a>を参照してください
    </li>
  </ol>
  <h2>以下サンプル</h2>
  <div id="example">
    <div>example-01 本文は二重中括弧 : {{ message }}</div>
    <div>example-02 属性はv-bind（:のみによる略記表記が可能） : <span :title="message">Hover here.</span></div>
    <div>example-03 属性はv-bind（:のみによる略記表記が可能）classにバインドする場合はjson形式で記述できる : <span :class="classJson">Please show F12 >
        Elements.</span></div>
    <div>example-04 v-once : <span v-once>{{ message }}</span></div>
    <div>example-05 v-html（v-htmlはユーザーから提供されたコンテンツに対しては決して使用してはいけません。）: <span v-html="htmlMessage"></span></div>
    <div>example-06 v-if, v-else, key特殊属性 : <span v-if="seen" key="seenIsTrue">Now you see me</span><span v-else
        key="seenIsFalse">Else!</span></div>
    <div>example-07 v-for, key特殊属性 : <ol>
        <li v-for="(todo, i) in todos" :key="todo.id">
          インデックス={{i}}, text={{ todo.text }}
        </li>
      </ol>
    </div>
    <div>example-08 v-on:clickとmethods（@のみによる略記表記が可能） : <button @click="reverseSeen">Reverse seen</button></div>
    <div>example-09 v-model（双方向バインディング） : <input v-model="message"></div>
    <div>example-10-1 elプロパティは、CSSセレクタを記載する</div>
    <div>example-10-2 dataプロパティは、バインドするjsonを設定する</div>
    <div>example-10-3 createdハンドラは、初期化時に呼ばれる（vue の createdを参照のこと）</div>
    <div>example-10-4 computedプロパティは、dataをoopフィールドと見立てた場合のoopプロパティである。キャッシュされる計算値 : {{ reversedMessage }}</div>
    <div>example-10-5 methodsプロパティは、dataをoopフィールドと見立てた場合のoopメソッドである。</div>
    <div>example-10-6 watchプロパティは、dataやcomputedに対する変更監視ができる。（vue の watchを参照のこと）</div>
    <div>example-11 templateタグ（html5にあるjsとの連携を前提とした初期では非表示な内容）とv-ifを組み合わせれば、簡単にdivで囲まずに複数の要素の表示切替ができる
      <template v-if="seen">
        <p>paragraph1</p>
        <p>paragraph2</p>
        <p>paragraph3</p>
      </template>
    </div>
  </div>
  <script>
    // ES2018
    // vue.js 3.x
    // インスタンスプロパティまたはコールバックでアロー関数 を使用しないでください。
    /* global Vue */
    const example = Vue.createApp({
      data() {
        return {
          message: 'Hello Vue!',
          htmlMessage: '<span style="color:blue">This text is blue!</span>',
          seen: true,
          todos: [
            {
              id: 1,
              text: 'Learn JavaScript'
            },
            {
              id: 2,
              text: 'Learn Vue'
            },
            {
              id: 3,
              text: 'Build something awesome'
            }
          ],
          classJson: {
            'text-left': true,
            'text-danger': false
          }
        };
      },
      created() {
        alert('created is called.');
      },
      computed: {
        reversedMessage() {
          // `this` は この Vue インスタンスを指します
          return this.message.split('').reverse().join('')
        }
      },
      methods: {
        reverseSeen() {
          this.seen = (this.seen == false) ? true : false;
        }
      },
      watch: {
        seen(newValue, oldvalue) {
          alert('seen : ' + oldvalue + '->' + newValue);
        }
      }
    });
    example.mount('#example');
  </script>
</body>

</html>